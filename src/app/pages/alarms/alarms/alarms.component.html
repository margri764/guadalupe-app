

<div class="row pd-20">

  <div class="mat-elevation-z8 pd-10" style="border-radius: 7px;">
        
    <div class="d-flex justify-content-between align-items-center w-100">

        <mat-form-field appearance="outline" color="primary">
            <input matInput placeholder="Procurar aqui" (keyup)="applyFilter($event)" />
          </mat-form-field>

        <button  type="button" mat-flat-button  color="primary" class="font fs-10 shadow" (click)="openModalNewAlarm()"  >
            <i class="fas fa-plus "></i> &nbsp; Novo
        </button>
    </div>

    <table mat-table [dataSource]="dataSource" matSort class="mt-20"  >

        <ng-container matColumnDef="name" >
            <th mat-header-cell *matHeaderCellDef  mat-sort-header > Nome </th>
            <td mat-cell *matCellDef="let alarm"> 
                {{ alarm.name }}
           </td>
          </ng-container>

        <ng-container matColumnDef="alarmUser">
            <th mat-header-cell *matHeaderCellDef mat-sort-header > Usuário do alarme </th>
            <td mat-cell *matCellDef="let alarm" class="selected" [routerLink]="['/painel/editar-usuario/', alarm.userAlarm.iduser]"> 
                     {{ alarm.userAlarm.name }}  
            </td>
          </ng-container>

          <ng-container matColumnDef="group">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Grupos  </th>
            <td mat-cell *matCellDef="let alarm"> 
                <span *ngFor="let group of alarm.grupos; let i = index" (click)="getUsersGroup(alarm, i)" class="selected">
                    {{ group.name }} &nbsp;&nbsp;&nbsp;
                  </span>
            </td>
          </ng-container>

          <ng-container matColumnDef="user">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Usuários </th>
            <td  mat-cell *matCellDef="let alarm" >
                <span *ngFor="let userNotif of alarm.idUsersNotifications" [routerLink]="['/painel/editar-usuario/', userNotif.iduser]" class="selected">
                    {{ userNotif.Nome_Completo }} &nbsp;&nbsp;&nbsp;
                  </span>
            </td>
          </ng-container> 

          <ng-container matColumnDef="data">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Data </th>
            <td  mat-cell *matCellDef="let alarm" >
                {{alarm.alarmDate | date }} 
            </td>
          </ng-container> 

          <ng-container matColumnDef="propulsao">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Propulsões </th>
            <td  mat-cell *matCellDef="let alarm" >
                {{ alarm.propulsao_name }}
            </td>
          </ng-container> 
              
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef >  Ação </th>

            <td  mat-cell *matCellDef="let alarm" >

                <div class="d-flex justify-content-center align-items-center " >
                    <span class="material-icons cursor edit"  (click)="editAlarm(alarm)" [matTooltip]="'Editar alarme'">edit</span>

                    <span class="material-icons cursor active"  [matTooltip]="'Ativar alarme'" *ngIf="alarm.status === 'paused'" (click)="activePauseAlarm(alarm, 'active')">play_circle_outline</span>

                    <span class="material-icons cursor paused"   [matTooltip]="'Pausar alarme'" *ngIf="alarm.status !== 'paused'" (click)="activePauseAlarm(alarm, 'paused')">pause_circle_outline</span>

                    <span class="material-icons cursor delete"  [matTooltip]="'Excluir alarme'" (click)="onRemove(alarm)">delete</span>
                </div>

              </td>
          </ng-container>
              
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    </table>
  </div>  

    <br>
</div>
  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>

  
